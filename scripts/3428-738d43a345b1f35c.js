"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3428],{34033:function(e,n,t){t.d(n,{EM:function(){return s},b8:function(){return l}});var u=t(89992),i=t(88075),r=t(24658),a=t(49793),o=t(99694),c=t(26821);let s=()=>{let{account:e,activeOrganization:n}=(0,i.t)(),t=null==e?void 0:e.uuid,s=null==n?void 0:n.uuid,{addError:l}=(0,r.e)(),d=(0,c.useQueryClient)();return(0,u.uC)("/api/organizations/".concat(s,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{d.invalidateQueries({queryKey:[a.dY,{orgUuid:s,accountUuid:t,syncSourceType:o.Fg.GDRIVE}]})},300)},onError:e=>{l(e)}})},l=()=>{let{activeOrganization:e}=(0,i.t)(),n=null==e?void 0:e.uuid,{addError:t}=(0,r.e)(),s=(0,c.useQueryClient)();return(0,u.uC)("/api/organizations/".concat(n,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{s.invalidateQueries({queryKey:[a.dY,{orgUuid:n,syncSourceType:o.Fg.GDRIVE}]})},onError:e=>{t(e)}})}},23428:function(e,n,t){t.d(n,{E4:function(){return M},En:function(){return Y},J$:function(){return X},JQ:function(){return R},M1:function(){return F},Mr:function(){return er},Mv:function(){return Z},N:function(){return L},P8:function(){return ei},QD:function(){return Q},RS:function(){return $},Rs:function(){return w},Y$:function(){return ec},Yn:function(){return k},bZ:function(){return G},f0:function(){return q},gQ:function(){return j},gb:function(){return eg},hJ:function(){return I},j5:function(){return ev},lP:function(){return eu},mD:function(){return J},nC:function(){return W},oE:function(){return x},sf:function(){return el},sv:function(){return z},tc:function(){return P},td:function(){return B},vc:function(){return ee},xm:function(){return ed},xn:function(){return O},yb:function(){return en}});var u,i,r,a,o,c,s=t(73567),l=t(89992),d=t(88075),f=t(24658),g=t(65490),v=t(2275),y=t(44846),_=t(49793),p=t(99694),h=t(26821),m=t(67754),b=t(7653),S=t(17792),E=t(1489),C=t(71894),T=t(34033);let w="drive_indexing_enablement_2/11_1",A="gdrive_success",D="github_success";(u=a||(a={})).PENDING="pending",u.STARTED="started",u.COMPLETED="completed",u.FAILED="failed",(i=o||(o={})).PATH_NOT_FOUND="path_not_found",i.INVALID_SHA="invalid_sha",i.SIZE_LIMIT_EXCEEDED="size_limit_exceeded",i.SOURCE_MISSING_OR_CHANGED="source_missing_or_changed",(r=c||(c={})).NOT_AUTHENTICATED="not_authenticated",r.NOT_AUTHORIZED="not_authorized",r.CAN_ACCESS="can_access";let I=e=>e.type===p.Fg.GITHUB?{sync_source_type:p.Fg.GITHUB,sync_source_config:e.config}:e.type===p.Fg.GDRIVE?{sync_source_type:p.Fg.GDRIVE,sync_source_config:e.config}:null,P=()=>{let{activeOrganization:e}=(0,d.t)(),n=null==e?void 0:e.uuid,{value:t}=(0,y.F)("nighthawk_enabled"),{value:u}=(0,y.F)("kingfisher_enabled"),{value:i}=(0,y.F)("spider_enabled_2");return(0,l.WE)("/api/organizations/".concat(n,"/sync/settings"),{queryKey:[_.FU,{orgUUID:n}],enabled:!!(e&&(t||u||i))})},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,{value:u}=(0,y.F)("nighthawk_enabled"),{value:i}=(0,y.F)("kingfisher_enabled"),{value:r}=(0,y.F)("spider_enabled_2"),a=(0,h.useQueryClient)();return(0,l.Ne)("/api/organizations/".concat(t,"/sync/settings"),"PUT",(e,n)=>{let{type:t,enabled:u}=e;n||(n=[]);let i=n.map(e=>e.type===t?{...e,enabled:u}:e);return i.some(e=>e.type===t)?i:[...n,{type:t,enabled:u}]},{queryKey:[_.FU,{orgUUID:t}],enabled:!!(n&&(u||i||r)),onSuccess:async function(){for(var n,u=arguments.length,i=Array(u),r=0;r<u;r++)i[r]=arguments[r];await a.invalidateQueries({queryKey:[_.FU,{orgUUID:t}]}),await (null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,...i))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,u=(0,h.useQueryClient)(),{value:i}=(0,y.F)("kingfisher_enabled"),{value:r}=(0,y.F)("apps_use_bananagrams");return(0,l.Ne)("/api/organizations/".concat(t,"/sync/settings/config"),"POST",(e,n)=>{let{type:t,config:u}=e;return n||(n=[]),n.map(e=>e.type===t?{...e,config:{...e.config,...u}}:e)},{queryKey:[_.FU,{orgUUID:t}],enabled:!!(n&&i&&r),onSuccess:async function(){for(var n,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];await u.invalidateQueries({queryKey:[_.FU,{orgUUID:t}]}),await (null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,...r))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},R=()=>{let e=M(),n=(0,d.rW)(),{value:t}=(0,y.F)("apps_use_bananagrams");return e&&n&&t},U=()=>{let e=R(),n=(0,d.Cf)(),{data:t}=P(),u=!!n&&!(null==t?void 0:t.find(e=>{var n;return e.type===p.Fg.GDRIVE&&e.enabled&&(null===(n=e.config)||void 0===n?void 0:n.allow_indexing)}));return e&&!u},q=()=>{let{isDismissed:e}=(0,S.K)(),n=e(w),t=U(),u=x();return t&&!n&&u},z=()=>{let{account:e}=(0,d.t)(),{mutate:n}=(0,s.Ck)(),t=(0,d.Cf)(),{data:u}=P(),i=!!t&&!(null==u?void 0:u.find(e=>{var n;return e.type===p.Fg.GDRIVE&&e.enabled&&(null===(n=e.config)||void 0===n?void 0:n.allow_indexing)})),{mutate:r}=(0,T.EM)(),{enabled_bananagrams:a,enabled_gdrive_indexing:o}=(null==e?void 0:e.settings)||{};return{isDriveIndexingDisabledByOrg:i,isDriveSearchEnabled:a,isDriveIndexingEnabled:!i&&o,toggleDriveSearchAndIndexingEnabled:t=>{var u;let{indexingEnabled:i,searchEnabled:a,dismissBanner:o}=t;i&&r({}),n({...null==e?void 0:e.settings,...void 0!==i?{enabled_gdrive_indexing:i}:null,...void 0!==a||!0===i?{enabled_bananagrams:null!=i?i:a}:null,...o?{dismissed_claudeai_banners:[...(null==e?void 0:null===(u=e.settings)||void 0===u?void 0:u.dismissed_claudeai_banners)||[],{banner_id:w,dismissed_at:new Date().toISOString()}]}:null})}}},N=(e,n)=>{let t=new URLSearchParams(Array.from(n.entries()));t.delete(e);let u=t.toString()?"?".concat(t.toString()):"",i=window.location.pathname+u;window.history.replaceState({...window.history.state,as:i,url:i},"",i)},K=e=>{let{callerIdentifier:n,successParam:t,handleOpen:u}=e,i=(0,m.useSearchParams)(),r=(0,b.useRef)(!1);(0,b.useEffect)(()=>{!i.has(t)||r.current||n&&n!==i.get(t)||(r.current=!0,N(t,i),u())},[i,n,u,t])},G=()=>{let{value:e}=(0,y.F)("cinnabon_enabled");return e},Q=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:t}=(0,d.t)(),u=null==t?void 0:t.uuid,i=(0,m.useRouter)(),r=(0,m.usePathname)(),a=(0,m.useSearchParams)(),{callerIdentifier:o,onAuthSuccess:c}=n,s=G(),f=(0,h.useQueryClient)(),{data:g}=(0,l.WE)("/api/organizations/".concat(u,"/sync/").concat(e,"/auth"),{queryKey:["sync_".concat(e,"_auth_status"),{orgUUID:u}],enabled:!!(t&&s)}),y=(0,b.useRef)(!1),{mutate:_}=(0,l.uC)("/api/organizations/".concat(u,"/sync/").concat(e,"/auth/start"),"POST",{enabled:!!(t&&s),onSuccess:e=>{i.push(e.redirect_url)}});K({callerIdentifier:o,successParam:"".concat(e,"_success"),handleOpen:()=>null==c?void 0:c(!0)});let{mutate:p}=(0,l.uC)("/api/organizations/".concat(u,"/sync/").concat(e,"/auth"),"DELETE",{enabled:!!(t&&s),onSuccess:()=>{f.invalidateQueries({queryKey:["sync_".concat(e,"_auth_status"),{orgUUID:u}]})}});return{isAuthenticated:!!(null==g?void 0:g.is_authenticated),startAuth:()=>{if(!y.current&&s){y.current=!0;let n=H({pathname:r,searchParams:a,queryString:"".concat(e,"_success=").concat(o)});if((0,v.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=".concat(e,"&origin=").concat(n));return}_({pre_auth_state:{origin:n},redirect_uri:new URL("/connect/".concat(e,"/callback"),window.location.origin).toString()})}},disconnect:p}},k=function(){let{callerIdentifier:e,toggleGithubModalOpen:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,d.t)(),u=null==t?void 0:t.uuid,i=ei(),r=(0,m.useRouter)(),{data:a}=(0,l.WE)("/api/organizations/".concat(u,"/sync/github/auth"),{queryKey:[_.Os,{orgUUID:u}],enabled:!!(t&&i)}),{mutate:o}=(0,l.uC)("/api/organizations/".concat(u,"/sync/github/auth/start"),"POST",{enabled:!!(t&&i),onSuccess:e=>{r.push(e.redirect_url)}}),c="".concat(D,"=").concat(e);K({callerIdentifier:e,successParam:D,handleOpen:()=>{null==n||n(!0)}});let s=(0,m.useSearchParams)(),f=(0,b.useRef)(!1),g=H({pathname:(0,m.usePathname)(),searchParams:s,queryString:c});return{isGithubAuthenticated:!!(null==a?void 0:a.is_authenticated),initGithubAuth:()=>{if(i){if((0,v.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=github&origin=".concat(g));return}f.current||(f.current=!0,o({pre_auth_state:{origin:g}}))}}}},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,u=ei(),i=(0,h.useQueryClient)();return(0,l.uC)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&u),...e,onSuccess:function(){for(var n,u=arguments.length,r=Array(u),a=0;a<u;a++)r[a]=arguments[a];i.invalidateQueries({queryKey:[_.Os,{orgUUID:t}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...r)}})},M=()=>{let{data:e}=P(),n=(0,d.Cf)(),{value:t}=(0,y.F)("kingfisher_enabled"),u=!!(null==e?void 0:e.find(e=>e.type===p.Fg.GDRIVE&&e.enabled));return!!(t&&(!n||u))},x=()=>{let{account:e,activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,u=M(),{data:i}=(0,l.WE)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[_.Yw,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:u,staleTime:3e5});return!!(null==i?void 0:i.is_authenticated)},V=e=>{let{callerIdentifier:n}=e,t=(0,m.usePathname)(),{account:u,activeOrganization:i}=(0,d.t)(),r=null==u?void 0:u.uuid,a=null==i?void 0:i.uuid,o=M(),c=(0,m.useRouter)(),s=(0,h.useQueryClient)(),f=(0,m.useSearchParams)(),{mutate:g}=(0,l.uC)("/api/organizations/".concat(a,"/sync/mcp/drive/auth/start"),"POST",{enabled:o,onSuccess:e=>{c.push(e.redirect_url)}}),y=(0,b.useRef)(!1);return()=>{if(!o)return;let e=H({pathname:t,searchParams:f,queryString:"".concat(A,"=").concat(n)});if(s.invalidateQueries({queryKey:[_.Yw,{accountUUID:r,orgUUID:a}]}),(0,v.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=gdrive&origin=".concat(e));return}y.current||(y.current=!0,g({pre_auth_state:{origin:e},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}},W=function(){let{callerIdentifier:e,handleAuthSuccess:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x(),u=q(),{dropdownToOpen:i,openModal:r,clearCallerIdentifier:a}=(0,E.J)(),o=function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!t){null==n||n(t);return}u?(r(e),null==n||n(!1)):null==n||n(t)},c=V({callerIdentifier:e});return K({callerIdentifier:e,successParam:A,handleOpen:o}),(0,b.useEffect)(()=>{e&&i===e&&(null==n||n(!0),a())},[i,n,e,a]),{isDriveAuthenticated:t,shouldShowDriveIndexingEnablementModal:u,initDriveAuth:c,handleDriveTrigger:o}},H=e=>{let{pathname:n,searchParams:t,queryString:u}=e,i="".concat(n,"?").concat(u),r=t.get("origin");if(r)i=r;else if((0,v.Rx)()){let e=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,t=n.startsWith("/project/")&&e.test(n.slice(9)),r=n.startsWith("/chat/")&&e.test(n.slice(6));i="claude://claude.ai".concat(t||r||"/new"===n?n:"/new","?").concat(u)}return i},Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,d.t)(),u=null==n?void 0:n.uuid,i=null==t?void 0:t.uuid,r=M(),a=(0,h.useQueryClient)(),{mutate:o}=(0,T.b8)();return(0,l.uC)("/api/organizations/".concat(i,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&r),...e,onSuccess:function(){for(var n,t=arguments.length,r=Array(t),c=0;c<t;c++)r[c]=arguments[c];a.invalidateQueries({queryKey:[_.Yw,{accountUUID:u,orgUUID:i}]}),o({}),null===(n=e.onSuccess)||void 0===n||n.call(e,...r)}})},Z=e=>{let{documentId:n}=e,{account:t,activeOrganization:u}=(0,d.t)(),i=null==t?void 0:t.uuid,r=null==u?void 0:u.uuid,a=M(),o=(0,h.useQueryClient)(),c=(0,l.WE)("/api/organizations/".concat(r,"/sync/mcp/drive/document/").concat(n),{queryKey:[_.HI,{accountUUID:i,orgUUID:r,documentId:n}],enabled:a,meta:{noToast:!0}}),s=c.isError;return(0,b.useEffect)(()=>{s&&o.invalidateQueries({queryKey:[_.Yw,{accountUUID:i,orgUUID:r}]})},[o,s,i,r]),c},J=e=>{let{account:n,activeOrganization:t}=(0,d.t)(),u=null==n?void 0:n.uuid,i=null==t?void 0:t.uuid,r=M();return(0,l.Nl)(e.map(e=>"/api/organizations/".concat(i,"/sync/mcp/drive/document/").concat(e)),{queryKey:e.map(e=>[_.Yp,{accountUUID:u,orgUUID:i,documentId:e}]),enabled:r,meta:{noToast:!0}})},B=e=>{let{account:n,activeOrganization:t}=(0,d.t)(),u=null==n?void 0:n.uuid,i=null==t?void 0:t.uuid,r=M(),a=(0,C.F7)(),{data:o,isSuccess:c,isLoading:s}=(0,l.WE)("/api/organizations/".concat(i,"/sync/mcp/drive/recents"),{queryKey:[_.s8,{accountUUID:u,orgUUID:i}],enabled:e&&r,meta:{noToast:!0}});return(0,b.useEffect)(()=>{if(c&&o){let e=o.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,C.MU)(e)}},[c,o]),{recentDriveDocs:c?o:a,isLoading:s}},j=e=>{let{documentId:n}=e,{account:t,activeOrganization:u}=(0,d.t)(),i=null==t?void 0:t.uuid,r=null==u?void 0:u.uuid,a=X();return(0,l.WE)("/api/organizations/".concat(r,"/sync/mcp/outline/document/").concat(n),{queryKey:[_.q2,{accountUUID:i,orgUUID:r,documentId:n}],enabled:a})},$=e=>{let{account:n,activeOrganization:t}=(0,d.t)(),u=null==n?void 0:n.uuid,i=null==t?void 0:t.uuid,r=X();return(0,l.Nl)(e.map(e=>"/api/organizations/".concat(i,"/sync/mcp/outline/document/").concat(e)),{queryKey:e.map(e=>[_.q2,{accountUUID:u,orgUUID:i,documentId:e}]),enabled:r,meta:{noToast:!0}})},X=()=>{let{data:e}=P();return!1},ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,d.t)(),u=null==t?void 0:t.uuid,i=X(),{data:r,refetch:a}=(0,l.WE)("/api/organizations/".concat(u,"/sync/mcp/outline/auth"),{queryKey:[_.Sp,{accountUUID:null==n?void 0:n.uuid,orgUUID:u}],enabled:!!(t&&i),staleTime:5e3}),{mutate:o,isPending:c}=(0,l.uC)("/api/organizations/".concat(u,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&i),...e,onSuccess:function(){for(var n,t=arguments.length,u=Array(t),i=0;i<t;i++)u[i]=arguments[i];null===(n=e.onSuccess)||void 0===n||n.call(e,...u)}});return{isOutlineAuthenticated:!!(null==r?void 0:r.is_authenticated),refetch:a,initOutlineAuth:o,isLoadingOutlineAuthInit:c}},en=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,d.t)(),u=null==n?void 0:n.uuid,i=null==t?void 0:t.uuid,r=X(),a=(0,h.useQueryClient)();return(0,l.uC)("/api/organizations/".concat(i,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&r),...e,onSuccess:function(){for(var n,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];a.invalidateQueries({queryKey:[_.Sp,{accountUUID:u,orgUUID:i}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...r)}})},et=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/profile?redirect_url=".concat(e,"&open_outline_auth=true")},eu=()=>{let{initGithubAuth:e}=k(),{initDriveAuth:n}=W();return t=>{t===p.Fg.GITHUB?e():t===p.Fg.GDRIVE?n():t===p.Fg.OUTLINE&&et()}},ei=()=>{let{data:e}=P();return!!(null==e?void 0:e.find(e=>e.type===p.Fg.GITHUB&&e.enabled))},er=()=>{let{activeOrganization:e}=(0,d.t)(),n=null==e?void 0:e.uuid,t=ei();return(0,l.WE)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[_.wD,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},ea=e=>{let{owner:n,repo:t,branch:u}=e,{activeOrganization:i}=(0,d.t)(),r=null==i?void 0:i.uuid,a=ei(),o=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,l.WE)("/api/organizations/".concat(r,"/sync/github/repo?").concat(o),{queryKey:[_.Rz,{orgUUID:r,owner:n,repo:t}],enabled:!!(n&&t&&!u&&i&&a),meta:{noToast:!0}})},eo=e=>{let{owner:n,repo:t,branch:u}=e,{activeOrganization:i}=(0,d.t)(),r=null==i?void 0:i.uuid,a=ei();return(0,l.WE)("/api/organizations/".concat(r,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(u),{queryKey:[_.E0,{orgUUID:r,owner:n,repo:t,branch:u}],staleTime:3e5,enabled:!!(n&&t&&u&&i&&a),meta:{noToast:!0}})},ec=e=>{var n;let{owner:t,repo:u,branch:i}=e,r=ea({owner:t,repo:u,branch:i}),a=eo({owner:t,repo:u,branch:i||(null===(n=r.data)||void 0===n?void 0:n.default_branch)});return{data:{repo:r.data,tree:a.data},isFetching:r.isFetching||a.isFetching,error:r.error||a.error}},es=e=>[p.co.CREATED,p.co.PENDING,p.co.UPDATING].includes(e),el=e=>es(e.status.state),ed=e=>[p.co.FAILED,p.co.UPDATE_FAILED].includes(e.status.state),ef=e=>{if(e instanceof g.Hx)return e instanceof g.Hx&&"access_denied"===e.errorCode},eg=()=>{let{addError:e}=(0,f.e)(),n=(0,h.useQueryClient)();return(t,u)=>{ef(t)&&(e("Please try again. You may need to reconnect with your ".concat(p.hP[u.sync_source_type]," account.")),_.Su.forEach(e=>{n.invalidateQueries({queryKey:[e]})}),n.invalidateQueries({queryKey:[_.cF]}))}},ev=e=>{let{data:n}=P();return!!(null==n?void 0:n.find(n=>n.type===e&&n.enabled))}},17792:function(e,n,t){t.d(n,{K:function(){return a}});var u=t(73567),i=t(88075),r=t(7653);function a(){let{mutate:e,isPending:n}=(0,u.Ck)(),{account:t}=(0,i.t)();return{dismiss:(0,r.useCallback)(n=>{var u;t&&e({...t.settings,dismissed_claudeai_banners:[...(null==t?void 0:null===(u=t.settings)||void 0===u?void 0:u.dismissed_claudeai_banners)||[],{banner_id:n,dismissed_at:new Date().toISOString()}]})},[t,e]),isDismissed:(0,r.useCallback)(e=>{var n,u;return(null==t?void 0:null===(u=t.settings)||void 0===u?void 0:null===(n=u.dismissed_claudeai_banners)||void 0===n?void 0:n.some(n=>n.banner_id===e))||!1},[t]),isPending:n}}},1489:function(e,n,t){t.d(n,{J:function(){return s},Q:function(){return c}});var u=t(27573),i=t(90345),r=t.n(i),a=t(7653);let o=(0,a.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:r(),closeModal:r(),clearCallerIdentifier:r()}),c=e=>{let{children:n}=e,[t,i]=(0,a.useState)(!1),r=(0,a.useRef)(void 0),[c,s]=(0,a.useState)(void 0);return(0,u.jsx)(o.Provider,{value:{isOpen:t,openModal:e=>{i(!0),r.current=e},closeModal:()=>{i(!1),s(r.current)},dropdownToOpen:c,clearCallerIdentifier:()=>{s(void 0)}},children:n})},s=()=>(0,a.useContext)(o)},71894:function(e,n,t){t.d(n,{F7:function(){return a},MU:function(){return r},ZZ:function(){return o}});let u="recentDriveDocs";function i(e){return"object"==typeof e&&null!==e&&"string"==typeof e.uri&&("string"==typeof e.title||void 0===e.title)}function r(e){localStorage.setItem(u,JSON.stringify(e))}function a(){let e=localStorage.getItem(u);if(e){let n=JSON.parse(e);if(n&&Array.isArray(n)&&n.every(i))return n}return[]}function o(e){let n=a();r(n=n.filter(n=>n.uri!==e))}},73567:function(e,n,t){t.d(n,{Ck:function(){return h},IR:function(){return g},Pd:function(){return v},Uc:function(){return _},W1:function(){return s},_y:function(){return y},fb:function(){return S},gq:function(){return b},k7:function(){return m},ml:function(){return f},wO:function(){return l},yU:function(){return d},yq:function(){return p}});var u=t(89992),i=t(51571),r=t(17741),a=t(49793),o=t(26821),c=t(67754);function s(e,n){return(0,u.WE)("/api/auth/login_methods?email=".concat(e,"&source=").concat(n),{enabled:!!e&&(0,r.vV)(e),meta:{noToast:!0}})}let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)();return(0,u.uC)("/api/auth/send_magic_link","POST",{...e,transformVariables:e=>({...e,source:n?"claude":"console"})})},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)();return(0,u.uC)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:n?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)();return(0,u.uC)("/api/auth/verify_magic_link","POST",{...e,transformVariables:e=>({...e,source:n?"claude":"console"})})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)(),t=(0,c.useRouter)();return(0,u.uC)("/api/auth/verify_google","POST",{...e,onSuccess:(n,u,i)=>{!n.success&&n.sso_url?t.push(n.sso_url):e.onSuccess&&e.onSuccess(n,u,i)},transformVariables:e=>({...e,source:n?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)(),t=(0,c.useRouter)();return(0,u.uC)("/api/auth/accept_invite","POST",{...e,onSuccess:(n,u,i)=>{!n.success&&n.sso_url?t.push(n.sso_url):e.onSuccess&&e.onSuccess(n,u,i)},transformVariables:e=>({...e,source:n?"claude":"console"})})},y=()=>(0,u.uC)("/api/auth/logout","POST"),_=()=>(0,u.uC)("/api/auth/logout/all-sessions","POST"),p=()=>{let e=(0,o.useQueryClient)();return(0,u.uC)("/api/account","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[a.aY]})}})},h=()=>(0,u.Ne)("/api/account","PUT",(e,n)=>(null==n?void 0:n.account)?{...n,account:{...n.account,settings:e}}:n,{queryKey:[a.aY],transformVariables:e=>({settings:e})}),m=()=>{let e=(0,o.useQueryClient)();return(0,u.uC)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[a.aY]})}})};function b(e){return(0,u.WE)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function S(e,n,t){return(0,u.WE)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(n,"&source=").concat(t),{meta:{noToast:!0}})}},24658:function(e,n,t){t.d(n,{ErrorsProvider:function(){return p},e:function(){return h},v:function(){return m}});var u=t(27573),i=t(62627),r=t(20579),a=t.n(r),o=t(93749),c=t.n(o),s=t(63844),l=t.n(s),d=t(67754),f=t(7653),g=t(48644),v=t(88075),y=t(20504);let _=(0,f.createContext)(void 0);function p(e){let{children:n}=e,t=(0,f.useRef)(1),[i,r]=(0,f.useState)([]),a=(0,f.useCallback)(e=>{r(n=>n.filter(n=>n.id!==e))},[]),o=(0,f.useCallback)((e,n)=>{let u=t.current++;return r(n=>[...n,{id:u,message:e instanceof Error?e.message:e,toastType:"error"}]),n&&setTimeout(()=>a(u),n),u},[a]),c=(0,f.useCallback)((e,n)=>{let u=t.current++;return r(n=>[...n,{id:u,message:e,toastType:"success"}]),n&&setTimeout(()=>a(u),n),u},[a]),s=(0,f.useMemo)(()=>({toasts:i,addError:o,addSuccess:c,clearToast:a}),[i,o,c,a]);return(0,u.jsx)(_.Provider,{value:s,children:n})}function h(){let e=(0,f.useContext)(_);if(!e)throw Error("Must be called within ErrorsProvider");return e}function m(){var e;let{config:n}=(0,g.useConfig)("claude_system_message"),t=n.get("id",null),u=n.get("title",null),r=n.get("message",null),o=n.get("displayFrequencyHours",null),{account:s}=(0,v.t)(),_=null!==(e=null==s?void 0:s.uuid)&&void 0!==e?e:"logged-out",p=(0,d.usePathname)(),[h,m]=(0,y.R)("dismissed-system-messages",{}),b=(0,f.useMemo)(()=>()=>m(e=>{let n=a()(e);return t&&l()(n,[_,t],Date.now()),n}),[m,_,t]);return(0,f.useMemo)(()=>{if(!s||(0,i.cG)(s,!0)||"/download"===p||!t)return!1;let e=c()(h,[_,t]);return!e||"boolean"==typeof e||!!o&&Date.now()-e>=36e5*o},[s,t,_,h,o,p])?{currentSystemMessageId:t,currentSystemMessageTitle:u,currentSystemMessageContent:r,dismissCurrentSystemMessage:b}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},20504:function(e,n,t){t.d(n,{A:function(){return i},R:function(){return r}});var u=t(3982);function i(e,n){return(0,u.Xs)("SSS-".concat(e),n,{serializer:JSON.stringify,deserializer:JSON.parse})}function r(e,n){return(0,u._)("LSS-".concat(e),n,{serializer:JSON.stringify,deserializer:JSON.parse})}},62627:function(e,n,t){t.d(n,{D_:function(){return a},c6:function(){return i},cG:function(){return o},kK:function(){return r},wJ:function(){return u}});let u=e=>{let{account:n,isClaudeDot:t}=e,u=!1===n.settings.has_finished_claudeai_onboarding;return!n.full_name||!n.display_name||!!t&&u},i=(e,n)=>n&&!e.is_verified,r=(e,n)=>!!function(e,n){for(let t of e.invites)if(t.organization.capabilities&&t.organization.capabilities.includes(n))return t}(e,n?"raven":"api"),a=(e,n)=>!n&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,o=(e,n)=>u({account:e,isClaudeDot:n})||i(e,n)||r(e,n)||a(e,n)},17741:function(e,n,t){t.d(n,{KS:function(){return r},vV:function(){return i}});let u=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,i=e=>u.test(e),r=(e,n)=>{if(!n)return!1;let t=e.split("@")[1];return n.includes(t)}},99694:function(e,n,t){var u,i,r,a;t.d(n,{Fg:function(){return u},co:function(){return i},hP:function(){return o},qC:function(){return c}}),(r=u||(u={})).GITHUB="github",r.GDRIVE="gdrive",r.OUTLINE="outlin",r.SALESFORCE="sfdc",r.GMAIL="gmail",r.GCAL="gcal",r.SLACK="slack",r.ASANA="asana";let o={github:"GitHub",gdrive:"Google Drive",outlin:"Outline",sfdc:"Salesforce",gmail:"Gmail",gcal:"Google Calendar",slack:"Slack",asana:"Asana"};(a=i||(i={})).CREATED="created",a.PENDING="pending",a.FAILED="failed",a.UPDATING="updating",a.UPDATE_FAILED="update_failed",a.READY="ready",a.UNAUTHENTICATED="unauthenticated",a.ACCESS_DENIED="access_denied",a.DISABLED="disabled";let c=["access_denied","failed","unauthenticated","update_failed"]}}]);